<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Keyboard Button Press Fix</title>
    <style>
        body {
            font-family: system-ui, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-container {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
        }
        .button-demo {
            margin: 10px;
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            background: #007AFF;
            color: white;
            transition: all 0.2s ease;
        }
        .button-demo:hover {
            transform: scale(1.05);
        }
        .button-demo:active {
            transform: scale(0.95);
        }
        .status {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            background: #f0f0f0;
        }
    </style>
</head>
<body>
    <h1>Keyboard Button Press Fix Test</h1>
    
    <div class="test-container">
        <h2>Test Instructions</h2>
        <p>This test verifies that the tachUI Button component now shows the same scale(0.95) effect for both mouse clicks and keyboard activation (Enter/Space keys).</p>
        
        <h3>Before the fix:</h3>
        <ul>
            <li>Mouse click: ✅ Shows scale(0.95) effect during press</li>
            <li>Keyboard (Enter/Space): ❌ No visual feedback</li>
        </ul>
        
        <h3>After the fix:</h3>
        <ul>
            <li>Mouse click: ✅ Shows scale(0.95) effect during press</li>
            <li>Keyboard (Enter/Space): ✅ Shows scale(0.95) effect during press</li>
        </ul>
    </div>

    <div class="test-container">
        <h2>Native HTML Button (Reference)</h2>
        <p>This is a native HTML button with CSS :active state for comparison:</p>
        <button class="button-demo" onclick="updateStatus('Native button clicked!')">
            Native Button (Reference)
        </button>
        <p><small>Try both mouse click and keyboard (Tab to focus, then Enter/Space)</small></p>
    </div>

    <div class="test-container">
        <h2>tachUI Button (Calculator App)</h2>
        <p>To test the actual fix:</p>
        <ol>
            <li>Open the calculator app: <code>pnpm dev:calculator</code></li>
            <li>Try clicking a calculator button with mouse (should scale down)</li>
            <li>Press Tab to navigate to a button, then press Enter or Space</li>
            <li>The button should now show the same scale(0.95) effect as mouse clicks</li>
        </ol>
        
        <h3>What was changed:</h3>
        <pre><code>// Before (in useKeyboardSupport.ts):
if (key === 'Enter' || key === ' ' || key === 'Escape' || key === '/') {
  event.preventDefault()
}
onButtonPress(mappedButton) // Always intercepted, bypassing Button

// After:
if (key === 'Enter' || key === ' ') {
  return // Let focused Button handle naturally for visual feedback
}
// Only intercept non-Button keys (numbers, operators, etc.)</code></pre>
    </div>

    <div class="status" id="status">
        Click the native button above to test (mouse or keyboard)
    </div>

    <script>
        function updateStatus(message) {
            document.getElementById('status').textContent = message + ' (at ' + new Date().toLocaleTimeString() + ')';
        }
        
        // Add keyboard event listener to show when keys are pressed
        document.addEventListener('keydown', function(event) {
            if (event.target.classList.contains('button-demo') && (event.key === 'Enter' || event.key === ' ')) {
                updateStatus('Keyboard activation detected: ' + event.key + ' key pressed on ' + event.target.textContent);
            }
        });
    </script>
</body>
</html>