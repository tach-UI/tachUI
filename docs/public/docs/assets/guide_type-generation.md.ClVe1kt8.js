import{_ as i,c as a,o as t,ag as s}from"./chunks/framework.DH_Cy_iG.js";const g=JSON.parse('{"title":"Type Generation Workflow","description":"","frontmatter":{},"headers":[],"relativePath":"guide/type-generation.md","filePath":"guide/type-generation.md"}'),n={name:"guide/type-generation.md"};function r(o,e,l,h,d,p){return t(),a("div",null,[...e[0]||(e[0]=[s(`<h1 id="type-generation-workflow" tabindex="-1">Type Generation Workflow <a class="header-anchor" href="#type-generation-workflow" aria-label="Permalink to &quot;Type Generation Workflow&quot;">​</a></h1><p>TachUI ships a dedicated type-generation pipeline so IDEs and CI always see up-to-date modifier signatures. This guide explains the commands to run, how to integrate them into workflows, and how to keep generated files in sync across the monorepo.</p><h2 id="why-type-generation-matters" tabindex="-1">Why Type Generation Matters <a class="header-anchor" href="#why-type-generation-matters" aria-label="Permalink to &quot;Why Type Generation Matters&quot;">​</a></h2><ul><li><strong>Accurate IntelliSense</strong> – Generated declaration files (for example, <code>packages/core/src/types/generated-modifiers.d.ts</code>) expose modifier signatures directly to editors.</li><li><strong>Safer refactors</strong> – The generator validates new or renamed modifiers against registry metadata, catching conflicts before runtime.</li><li><strong>Consistent plugins</strong> – Feature packages (<code>@tachui/forms</code>, <code>@tachui/responsive</code>, etc.) rely on the same pipeline to contribute their modifiers to shared type snapshots.</li></ul><h2 id="core-commands" tabindex="-1">Core Commands <a class="header-anchor" href="#core-commands" aria-label="Permalink to &quot;Core Commands&quot;">​</a></h2><p>All commands run from the repo root and rely on the scripts defined in <code>packages/core/package.json</code>.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Regenerate modifier types for core (recommended after adding/modifying modifiers)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @tachui/core</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate-modifier-types</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Validate without writing changes (ideal for CI)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @tachui/core</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate-modifier-types</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --check</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Fail CI when conflicts are detected</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @tachui/core</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate-modifier-types</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --check</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --fail-on-conflict</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Watch mode during active development</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @tachui/core</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate-modifier-types</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --watch</span></span></code></pre></div><h3 id="monorepo-packages" tabindex="-1">Monorepo Packages <a class="header-anchor" href="#monorepo-packages" aria-label="Permalink to &quot;Monorepo Packages&quot;">​</a></h3><p>When working on feature packages, pass the package list to the monorepo helper:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @tachui/core</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate-modifier-types:monorepo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --packages</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> core,forms,grid</span></span></code></pre></div><p>This hydrates metadata from each package’s <code>register*Modifiers()</code> helper before emitting the combined type snapshot.</p><h2 id="keeping-ci-fast" tabindex="-1">Keeping CI Fast <a class="header-anchor" href="#keeping-ci-fast" aria-label="Permalink to &quot;Keeping CI Fast&quot;">​</a></h2><ol><li><strong>Leverage <code>--check</code> in pipelines.</strong> Add a step before <code>pnpm build</code> to ensure type snapshots are current.</li><li><strong>Cache VitePress output.</strong> The generator emits deterministic files, so CI caches stay valid as long as modifiers do not change.</li><li><strong>Fail fast on conflicts.</strong> The <code>--fail-on-conflict</code> flag surfaces duplicated names or category collisions produced by <code>registerModifierWithMetadata</code>.</li></ol><h2 id="working-with-generated-files" tabindex="-1">Working With Generated Files <a class="header-anchor" href="#working-with-generated-files" aria-label="Permalink to &quot;Working With Generated Files&quot;">​</a></h2><ul><li>Generated files contain a header explaining how to regenerate them. Do not hand-edit these files—run the command instead.</li><li>The generator validates that every modifier is registered with metadata (name, description, category). Missing metadata results in warnings flagged as part of the CLI output.</li><li>After regeneration, re-run <code>pnpm type-check</code> so downstream packages pick up the refreshed declarations.</li></ul><h2 id="ide-integration-checklist" tabindex="-1">IDE Integration Checklist <a class="header-anchor" href="#ide-integration-checklist" aria-label="Permalink to &quot;IDE Integration Checklist&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Task</th><th>Why it matters</th></tr></thead><tbody><tr><td>Add <code>pnpm --filter @tachui/core generate-modifier-types -- --watch</code> to your dev shell</td><td>Keeps local type declarations in sync while editing modifiers.</td></tr><tr><td>Run <code>pnpm --filter @tachui/core generate-modifier-types -- --check</code> before committing</td><td>Prevents stale declaration files from landing in git.</td></tr><tr><td>Use the monorepo command when touching feature packages</td><td>Ensures plugin modifiers appear in the core declaration map.</td></tr><tr><td>Pair with the ESLint rule (<code>@tachui/prefer-direct-modifiers</code>)</td><td>Guarantees code and types evolve together toward direct modifier calls.</td></tr></tbody></table><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><ul><li><strong>“Snapshot is stale” warnings</strong> – Run the generator; stale snapshots usually mean a modifier signature changed without re-running the command.</li><li><strong>Conflicting modifier names</strong> – Resolve the conflict by renaming the modifier or adjusting its priority/metadata before regenerating.</li><li><strong>Missing metadata logs</strong> – Ensure the package’s <code>register*Modifiers()</code> invokes <code>registerModifierWithMetadata</code> with the full descriptor.</li></ul><p>For additional details on metadata fields and registry behaviour, see the <a href="./modifier-type-generation">Modifier Type Generation deep dive</a>.</p>`,20)])])}const k=i(n,[["render",r]]);export{g as __pageData,k as default};
